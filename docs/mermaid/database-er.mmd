erDiagram
    STUDY {
        string id PK "UUIDv4"
        string title
        string image
        date updated_on
        date created_at
        string size
        boolean oversight_has_dmc
        string brief_summary "should act as a default description"
        string detailed_description
        string[] conditions
        string[] keywords
    }

    USER {
        string id PK "UUIDv4"
        string username
        string hash "probably not stored in table"
        string email_address
        string first_name "`Given name` in UI"
        string last_name "`Family name` in UI"
        string institution
        string orcid
        date created_at
        string location "Do we really need this?"
        string timezone "Might not need this either"
    }

    STUDY_CONTRIBUTOR {
        string study_id PK "UUIDv4"
        string user_id PK,FK "USER.id"
        string permission "owner|editor|viewer"
    }

    INVITED_STUDY_CONTRIBUTOR {
        string email_address PK
        string study_id PK,FK "STUDy.id"
        string permission "owner|editor|viewer"
        date invited_on
    }

    PARTICIPANT {
        string id PK "UUIDv4"
        string study_id FK "STUDY.id"
        string first_name "`Given name` in UI"
        string last_name "`Family name` in UI"
        string address
        int age "fields will come from redcap"
        date updated_on
        date created_at
    }

    DATASET {
        string id PK "UUIDv4"
        string study_id FK "STUDY.id"
        string latest_version FK "VERSION.id"
        string identifier
        string identifier_type
        string description
        string primary_language
        string[] keywords
    }

    VERSION {
        string id PK "UUIDv4"
        string dataset_id FK "DATASET.id"
        string title
        string description
        boolean published "should be uneditable after publish"
        string doi "identifier part only"
        date updated_on
        date created_at
        date published_on
    }

     VERSION_PARTICIPANT {
        string version_id PK,FK
        string participant_id PK,FK
    }

    STUDY_CONTRIBUTOR }o--o{ STUDY : contributes
    INVITED_STUDY_CONTRIBUTOR }o--o{ STUDY : "invited to"
    STUDY_METADATA ||--|| STUDY : "has metadata"

    STUDY ||--o{ DATASET : publishes

    DATASET_METADATA ||--|| DATASET : "has metadata"

    DATASET ||--o{ VERSION : creates

    USER }o--o{ STUDY_CONTRIBUTOR : "part of"
    PARTICIPANT }o--|| STUDY : participates
    VERSION }o--o{ VERSION_PARTICIPANT : has
    VERSION_PARTICIPANT }o--o{ PARTICIPANT : "part of"